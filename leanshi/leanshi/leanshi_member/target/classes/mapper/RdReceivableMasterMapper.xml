<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.leanshi.mapper.RdReceivableMasterMapper">

    <resultMap id="ReceivableResultMap" type="cn.leanshi.model.RdReceivableMaster">
        <result column="MM_CODE" property="mCode" />
        <result column="MM_NICK_NAME" property="mNickname" />
        <result column="RECEIVABLE_BLANCE" property="receivableBlance" />
        <result column="CURRENCY_CODE" property="currencyCode" />
        <result column="STATUS" property="status" />
        <result column="BNS_DEDUCT_PECENT" property="bnsDeductPecent" />
    </resultMap>

    <!--模糊条件查询-->
    <select id="findReceivableAll" parameterType="java.util.Map" resultMap="ReceivableResultMap">
        SELECT * FROM rd_receivable_master
        WHERE 1=1
        <if test="mCode !=null and mCode != ''">
            AND MM_CODE LIKE "%"#{mCode}"%"
        </if>
        <if test="mNickname !=null and mNickname != ''">
            AND MM_NICK_NAME LIKE "%"#{mNickname}"%"
        </if>
        <if test="status !=null and status !=0">
            AND STATUS = #{status}
        </if>
        ORDER BY MM_CODE ASC
    </select>

<<<<<<< HEAD
    <select id="findRdReceivableMaster" parameterType="string" resultMap="ReceivableResultMap">
        SELECT * FROM rd_receivable_master where MM_CODE = #{mCode}
    </select>

=======
    <!--根据编号查找会员欠款-->
    <select id="findReceivableByMCode" parameterType="string" resultMap="ReceivableResultMap">
        SELECT * FROM rd_receivable_master WHERE MM_CODE = #{mCode}
    </select>

    <!--创建欠款主表-->
    <insert id="addReceivableM" parameterType="cn.leanshi.model.RdReceivableMaster">
        INSERT INTO rd_receivable_master(MM_CODE,MM_NICK_NAME,RECEIVABLE_BLANCE,CURRENCY_CODE,BNS_DEDUCT_PECENT) VALUES (#{mCode},#{mNickname},#{receivableBlance},#{currencyCode},#{bnsDeductPecent})
    </insert>

    <!--新增欠款-->
    <update id="updateRM" parameterType="java.util.Map">
        UPDATE rd_receivable_master
        SET
        RECEIVABLE_BLANCE = #{receivableBlance}
        WHERE MM_CODE = #{mCode}
    </update>

>>>>>>> a5e07af72178f8c9f206d2a74eec3d9172b3c8eb
</mapper>