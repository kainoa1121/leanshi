<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.leanshi.mapper.RdReceivableDetailMapper">

    <resultMap id="RDResultMap" type="cn.leanshi.model.RdReceivableDetail">
        <result column="TRANS_NUMBER" property="transNumber" />
        <result column="BATCH_NUMBER" property="batchNumber" />
        <result column="MM_CODE" property="mCode" />
        <result column="TR_TYPE_CODE" property="trTypeCode" />
        <result column="TR_SOURCE_TYPE" property="trSourceType" />
        <result column="TR_BANK_OID" property="trBankOid" />
        <result column="CURRENCY_CODE" property="currencyCode" />
        <result column="BLANCE_BEFORE" property="blanceBefore" />
        <result column="AMOUNT" property="amount" />
        <result column="BLANCE_AFTER" property="blanceAfter" />
        <result column="TRANS_DATE" property="transDate" />
        <result column="TRANS_PERIOD" property="transPeriod" />
        <result column="TRANS_DESC" property="transDesc" />
        <result column="STATUS" property="status" />
        <result column="WASHED_YN" property="washedYn" />
        <result column="ORIGN_TRANS_NUMBER" property="orignTransNumber" />
        <result column="CREATION_BY" property="creationBy" />
        <result column="CREATION_TIME" property="creationTime" />
        <result column="UPDATE_BY" property="updateBy" />
        <result column="UPDATE_TIME" property="updateTime" />
        <result column="AUTOHRIZE_BY" property="autohrizeBy" />
        <result column="AUTOHRIZE_TIME" property="autohrizeTime" />
        <result column="AUTOHRIZE_DESC" property="autohrizeDesc" />
    </resultMap>
    <select id="findRdReceivableDetailLast" parameterType="string" resultMap="RDResultMap">
        select * from rd_receiveable_detail where MM_CODE = #{mCode} and STATUS = 3 order by CREATION_TIME desc limit 0,1
    </select>

    <insert id="insertRdReceivableDetail" parameterType="cn.leanshi.model.RdReceivableDetail">
        insert into rd_receiveable_detail (TRANS_NUMBER,BATCH_NUMBER,MM_CODE,TR_TYPE_CODE,
        TR_SOURCE_TYPE,CURRENCY_CODE,BLANCE_BEFORE,AMOUNT, BLANCE_AFTER,TRANS_PERIOD,STATUS,CREATION_TIME) values
        (#{transNumber},#{batchNumber},#{mCode},#{trTypeCode},#{trSourceType},#{currencyCode},
        #{blanceBefore},#{amount},#{blanceAfter},#{transPeriod},#{status},#{creationTime})
    </insert>
</mapper>